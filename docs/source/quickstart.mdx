---
title: Apollo Federation Quickstart
subtitle: Create a federated GraphQL API with Apollo Federation
description: Create a federated GraphQL API with Apollo Federation
---

By the end of this tutorial, you will have set up a federated GraphQL API that you can query locally in the Apollo Sandbox.
To learn more about federation and the benefits of using it with GraphOS, check out these resources:

- [Introduction to Apollo Federation](./)
- [Introduction to GraphOS](/graphos)

## Overview

Setting up a federated GraphQL API with GraphOS takes a few steps:

1. Select services to federate
2. Install and authenticate the Rover CLI
3. Start local development mode with one service
4. Add another service

### Prerequisites

To complete this quickstart, you must have the following:

- A [GraphOS Studio](https://studio.apollographql.com/?referrer=docs-content) account
- An organization with an [Enterprise trial](https://studio.apollographql.com/signup?type=enterprise-trial&referrer=docs-content) or Enterprise plan

If you haven't already, set these up before continuting.

### Step 1. Select services

To build a federated GraphQL API, you need at least two GraphQL services and an entity.
We recommend using Apollo's retail demo supergraph for this tutorial. The demo supergraph comes prebuilt with multiple services and sample schemas. 

Alternatively, you can use your own API's URLs and schemas while going through the tutorial.
These should be individual GraphQL services and you need their schemas on hand.

See [Introduction to Entities](./entities) to learn how to create entities in existing schemas.

### Step 2. Install and authenticate the Rover CLI

_Rover_ is Apollo's CLI for managing all kinds of graphs, including subgraphs and supergraphs. You'll use it throughout this quickstart.

<Note>

Even if you already have Rover installed, update your version now by completing this step.

</Note>

Install the latest Rover release with the appropriate command for your system:

```bash title="MacOS / Unix-like"
curl -sSL https://rover.apollo.dev/nix/latest | sh
```

```bash title="Windows"
iwr 'https://rover.apollo.dev/win/latest' | iex
```

After installing, run `rover` in your terminal with no arguments to confirm that it installed successfully. Verify that the printed version number matches the [latest release](https://github.com/apollographql/rover/releases). If it doesn't, you might need to manually delete a previous outdated installation.

You use the Rover CLI to publish subgraph schemas to Studio. To do that, you first need to authenticate Rover with Studio.
This entails obtaining an API key and providing it to Rover.

<ObtainGraphApiKey />

You can provide your API key to Rover either via the [`config auth`](/rover/commands/config) command or by setting an environment variable.
Since the command is recommended for local development, use that for this tutorial:

```shell
rover config auth
```

The `auth` command is interactive to prevent your API key from appearing in your terminal command history. Because it's interactive, using an [environment variable](/rover/configuring/#with-an-environment-variable) in automated environments such as CI.

### Step 3. Start local development 

The `rover dev` command starts a supergraph locally.
To use `rover dev`, you need at least one running GraphQL API (subgraph).
Rover can obtain a subgraph's schema via introspection or you can provide a local schema file.

Assuming you're using the retail demo supergraph, you can use the `dev` command with the options below to provide the schema for the locally running `Products` subgraph.

```bash title="Example command"
rover dev --name products --schema ./products.graphql --url http://localhost:4000
```

<Note>

You don't have to provide a locally running subgraph. You can point to any GraphQL endpoint that your local environment can reach. You can even mix and match local and remote subgraphs, which is helpful for testing local changes against your staging subgraphs.

</Note>

When you start your first `rover dev` process:

1. Rover obtains the subgraph schema you provide either via file path or introspection.
2. Rover composes a supergraph schema from the subgraph schema.
3. Rover starts a locally running router session and provides it the supergraph schema.
4. Rover starts watching the provided subgraph schema for changes (via either introspection or file), and it recomposes the supergraph schema whenever it detects a change. This automatically reloads the router.

To ensure everything is working as expected, try querying your router in the Apollo Sandbox:

1. Open https://studio.apollographql.com/sandbox/explorer/.
2. Update the sandbox URL to your locally running router's URL.
3. Run the following query:

```graphQL
query ExampleQuery {
  todo
}
```

### Step 4. Add another service

After you start a router session with your first `rover` dev command, you can add other subgraphs to that same session.
To add a subgraph, open a new terminal window and run `rover dev` again, this time providing the details of the subgraph to add. For example, this command adds the `Orders` subgraph.

```bash title="Example command"
rover dev --name orders --schema ./orders.graphql --url http://localhost:4001
```

When you add a new subgraph to a session, Rover recomposes the supergraph schema and updates the router so you can query all added subgraphs via the single router endpoint.

<Note>

Rover uses the port of the running router to identify an existing session. If you specify a custom port via `--supergraph-port` or `--router-config`, make sure to specify the same port for all `rover dev` processes that you want to attach to the same session.

</Note>

Now you can go back to the Sandbox and try running a federated query.

```graphQL
query ExampleFederatedQuery {
  todo
}
```

Congrats! You've built and queried your a federated GraphQL API. 

You can stop your initial `rover dev` process by pressing `CTRL+C`. This shuts down the local router session and any secondary `rover dev` processes attached to that same session.

## Next steps

Depending on your goals, you have several options for learning more about federation or moving your graph closer to product:

- Learn more about the power of the [`rover dev` command](/rover/commands/dev), including starting a session with multiple subgraphs, removing subgraphs, and configuring the router
- To quickly start up a new GraphQL project or explore various subgraph implementations, check out the [`rover template`](/rover/commands/template) command.
- [Publish your locally running supergraph](/graphos/delivery/publishing-schemas) to GraphOS Studio and share with your team